#ifndef final_H
#define final_H
const char final_source[] = R"shader_source(#version 430
layout(location=0)uniform vec2 y;layout(location=0)in vec2 v;
#line 1
layout(location=2)uniform vec3 m;layout(location=3)uniform vec4 f;layout(location=4)uniform float x;
#ifndef FOCAL_LENGTH
layout(location=5)uniform float s;
#endif
float n=6.28319;struct Material{vec3 color;float roughness;float metallic;};struct SphereLight{vec3 center;vec3 color;float radius;float intensity;};
#line 4
layout(binding=13)uniform sampler2D l;layout(location=0)out vec3 r;layout(location=6)uniform float d;layout(location=7)uniform float z;layout(location=8)uniform float w;layout(location=9)uniform float c;layout(location=10)uniform float i;vec3 t(vec3 y,vec4 v){vec3 f=2*cross(v.xyz,y);return y+v.w*f+cross(v.xyz,f);}vec3 t(){vec3 v=normalize(vec3((gl_FragCoord.xy-.5*y)/y.x,-s/.03));return t(v,f);}vec3 t(vec3 v,vec3 y,out int f,int x,float z){float r=0.;for(f=0;f<x;f++){float m=f(v)[0]*z;v+=y*m;m=abs(m);r+=m;if(m<.001*r)break;}return v;}vec3 t(vec3 v,vec3 f,out int y){return t(v,f,y,100,1.);}vec3 t(vec3 v){vec2 f=vec2(.001,0.);return normalize(vec3(f(v+f.xyy)[0]-f(v-f.xyy)[0],f(v+f.yxy)[0]-f(v-f.yxy)[0],f(v+f.yyx)[0]-f(v-f.yyx)[0])+1e-09);}float p(vec3 v,float y){return length(v)-y;}float p(vec3 v,vec3 y,vec3 f,float x){vec3 m=v-y,z=f-y;float n=clamp(dot(m,z)/dot(z,z),0.,1.);return length(m-z*n)-x;}float h(vec3 v,vec2 y){vec2 f=vec2(length(v.xz)-y.x,v.y);return length(f)-y.y;}float e(vec3 v,vec3 y){return v=abs(v)-y,max(v.x,max(v.y,v.z));}float F(vec2 v,vec2 y){return v=abs(v)-y,max(v.x,v.y);}float S(vec3 v,vec3 y){vec3 f=abs(v)-y;return min(max(f.x,max(f.y,f.z)),0.)+length(max(f,0.));}float F(vec3 v,vec3 f,float y){return S(v,f-y)-y;}float M(vec3 v,vec2 y){float f=length(v.xy);return dot(y,vec2(f,v.z));}float o(vec3 v,vec3 f){return dot(v,f.xyz);}vec2 a(vec2 v,vec2 y){return mix(v,y,float(v.x>y.x));}float M(float v,float f,float y){float x=clamp(.5+.5*(f-v)/y,0.,1.);return mix(f,v,x)-y*x*(1.-x);}vec2 S(vec2 v,vec2 f,float y){return vec2(M(v,f,y),v.x>f.x?f.y:v.y);}vec2 a(vec2 v,vec2 f,float y){float x=clamp(.5+.5*(f-v)/y,0.,1.);return vec2(mix(f.x,v.x,x)-y*x*(1.-x),mix(f.y,v.y,x));}float e(float v,float f,float y){float x=clamp(.5-.5*(f-v)/y,0.,1.);return mix(f,v,x)+y*x*(1.-x);}float u(vec3 v,vec3 y){return max(0.,dot(v,y));}float F(float y){return y*y;}vec3 F(vec3 v,vec3 y,vec3 f,Material m,SphereLight x){vec3 d=x.center-v,z=reflect(-f,y),l=dot(d,z)*z-d,n=d+l*clamp(x.radius/length(l),0.,1.),c=normalize(n);float w=distance(v,x.center),s=acos(-1.);vec3 r=.5*(c+f);float i=dot(y,r),S=u(y,c),g=dot(y,f),Z=F(m.roughness),D=F(Z),o=F(m.roughness+1.),a=D/(4.*mix(S,1.,o)*mix(g,1.,o)*s*F(F(i)*(D-1.)+1.)),G=clamp(Z+x.radius*.5/w,0.,1.),e=D/(G*G),M=dot(f,r),k=exp2((-5.55473*M-6.98316)*M),t=.04+.96*k;vec3 b=m.color+(1.-m.color)*k,q=.5*(m.color/s+a*t),p=a*b;float L=F(1.-F(F(w/x.radius))),h=clamp(L,0.,1.)/(F(w)+1.);return S*mix(q,p,m.metallic)*h*x.intensity*x.color*e;}vec3 g(vec3 y,float x){return y*x;}vec3 b(vec3 v,vec3 y){return mod(v,y)-.5*y;}vec3 F(vec3 v,float f,float y,float x){return b(v,vec3(f,y,x));}vec3 L(vec3 v,vec3 y){return v-y;}vec3 L(vec3 v,float f,float y,float x){return L(v,vec3(f,y,x));}mat3 L(float v){return mat3(1.,0.,0.,0.,cos(v),sin(v),0.,-sin(v),cos(v));}mat3 M(float v){return mat3(cos(v),0.,-sin(v),0.,1.,0.,sin(v),0.,cos(v));}mat3 S(float v){return mat3(cos(v),sin(v),0.,-sin(v),cos(v),0.,0.,0.,1.);}mat2 a(float v){return mat2(cos(v),-sin(v),sin(v),cos(v));}float C(float v,float y){const float x=v*y;return x*exp(1.-x);}float C(float y,float v,float f){return clamp((f-y)/(v-y),0.,1.);}float C(float v){return v-floor(v*(1./289.))*289.;}vec2 b(vec2 v){return v-floor(v*(1./289.))*289.;}vec3 e(vec3 v){return v-floor(v*(1./289.))*289.;}vec4 g(vec4 v){return v-floor(v*(1./289.))*289.;}float h(float v){return g((v*34.+1.)*v);}vec2 o(vec2 v){return g((v*34.+1.)*v);}vec3 p(vec3 v){return g((v*34.+1.)*v);}vec4 u(vec4 v){return g((v*34.+1.)*v);}vec4 T(vec4 y){return 1.79284-.853735*y;}vec2 O(vec2 v){return v*v*v*(v*(v*6.-15.)+10.);}vec3 N(vec3 v){return v*v*v*(v*(v*6.-15.)+10.);}float H(vec2 v){vec4 f=floor(v.xyxy)+vec4(0.,0.,1.,1.),m=fract(v.xyxy)-vec4(0.,0.,1.,1.);f=g(f);vec4 y=f.xzxz,x=f.yyww,d=m.xzxz,n=m.yyww,l=u(u(y)+x),r=fract(l*(1./41.))*2.-1.,z=abs(r)-.5,s=floor(r+.5);r=r-s;vec2 w=vec2(r.x,z.x),c=vec2(r.y,z.y),o=vec2(r.z,z.z),Z=vec2(r.w,z.w);vec4 D=T(vec4(dot(w,w),dot(o,o),dot(c,c),dot(Z,Z)));w*=D.x;o*=D.y;c*=D.z;Z*=D.w;float i=dot(w,vec2(d.x,n.x)),q=dot(c,vec2(d.y,n.y)),M=dot(o,vec2(d.z,n.z)),t=dot(Z,vec2(d.w,n.w));vec2 S=N(m.xy),G=mix(vec2(i,M),vec2(q,t),S.x);float b=mix(G.x,G.y,S.y);return 2.3*b;}float G(vec3 v){vec3 f=floor(v),y=f+vec3(1.);f=g(f);y=g(y);vec3 x=fract(v),z=x-vec3(1.);vec4 m=vec4(f.x,y.x,f.x,y.x),n=vec4(f.yy,y.yy),c=f.zzzz,r=y.zzzz,d=u(u(m)+n),D=u(d+c),s=u(d+r),l=D*(1./7.),w=fract(floor(l)*(1./7.))-.5;l=fract(l);vec4 S=vec4(.5)-abs(l)-abs(w),a=step(S,vec4(0.));l-=a*(step(0.,l)-.5);w-=a*(step(0.,w)-.5);vec4 o=s*(1./7.),Z=fract(floor(o)*(1./7.))-.5;o=fract(o);vec4 i=vec4(.5)-abs(o)-abs(Z),t=step(i,vec4(0.));o-=t*(step(0.,o)-.5);Z-=t*(step(0.,Z)-.5);vec3 G=vec3(l.x,w.x,S.x),q=vec3(l.y,w.y,S.y),M=vec3(l.z,w.z,S.z),p=vec3(l.w,w.w,S.w),h=vec3(o.x,Z.x,i.x),b=vec3(o.y,Z.y,i.y),L=vec3(o.z,Z.z,i.z),k=vec3(o.w,Z.w,i.w);vec4 e=T(vec4(dot(G,G),dot(M,M),dot(q,q),dot(p,p)));G*=e.x;M*=e.y;q*=e.z;p*=e.w;vec4 F=T(vec4(dot(h,h),dot(L,L),dot(b,b),dot(k,k)));h*=F.x;L*=F.y;b*=F.z;k*=F.w;float C=dot(G,x),O=dot(q,vec3(z.x,x.yz)),H=dot(M,vec3(x.x,z.y,x.z)),E=dot(p,vec3(z.xy,x.z)),A=dot(h,vec3(x.xy,z.z)),Y=dot(b,vec3(z.x,x.y,z.z)),X=dot(L,vec3(x.x,z.yz)),W=dot(k,z);vec3 V=N(x);vec4 U=mix(vec4(C,O,H,E),vec4(A,Y,X,W),V.z);vec2 R=mix(U.xy,U.zw,V.y);float Q=mix(R.x,R.y,V.x);return 2.2*Q;}float E(vec2 v){vec2 y=g(v),f=u(y);return fract(u(f.x*f.y+y.x+y.y)/41.)*2.-1.;}float D(vec3 v){vec3 y=g(v),f=u(y);return fract(u(f.x*f.y*f.z+y.x+y.y+y.z)/41.)*2.-1.;}float A(vec2 v){vec2 f=floor(v),y=fract(v),x=vec2(1.,0.);float m=D(f+x.yy),z=D(f+x.yx),n=D(f+x.xy),w=D(f+x.xx);y=N(y);return mix(mix(m,n,y.x),mix(z,w,y.x),y.y);}float q(vec3 v){vec3 f=floor(v),y=fract(v);vec2 x=vec2(1.,0.);float m=D(f+x.yyy),z=D(f+x.yyx),l=D(f+x.yxy),w=D(f+x.yxx),n=D(f+x.xyy),d=D(f+x.xyx),Z=D(f+x.xxy),c=D(f+x.xxx);y=N(y);return mix(mix(mix(m,n,y.x),mix(l,Z,y.x),y.y),mix(mix(z,d,y.x),mix(w,c,y.x),y.y),y.z);}float k(vec2 v){return(G(v)+G(v*2.)*.5+G(v*4.)*.25)/1.75;}float Z(vec3 v){return(G(v)+G(v*2.)*.5+G(v*4.)*.25)/1.75;}float Y(vec2 v){return(q(v)+q(v*2.)*.5+q(v*4.)*.25)/1.75;}float X(vec3 v){return(q(v)+q(v*2.)*.5+q(v*4.)*.25)/1.75;}vec2 A(float v,float f,float y,vec2 x){x=x*2.-1.;float m=v*v*(x.x*x.x)+x.y*x.y,n=v*v+1.,z=f+y*sqrt(2.),d=(1.+m*z)/(1.+n*z);return d*x*.5+.5;}float A(float v,vec2 y){float f=1.-v;y.y*=-1.;return f+v*16.*y.x*y.y*(1.-y.x)*(-1.-y.y);}void main(){vec3 f;float m=d,n=z,o=y.x/y.y;f.x=textureLod(l,A(o,m*1.34,n,v),0.).x;f.y=textureLod(l,A(o,m*1.2,n,v),0.).y;f.z=textureLod(l,A(o,m,n,v),0.).z;f*=A(w,gl_FragCoord.xy/y);r=f+i*vec3(Z(1./(10.*c)*gl_FragCoord.xy+2100.*x),Z(1./(10.*c)*gl_FragCoord.xy+2300.*x),Z(1./(10.*c)*gl_FragCoord.xy+2900.*x));})shader_source";
#endif
