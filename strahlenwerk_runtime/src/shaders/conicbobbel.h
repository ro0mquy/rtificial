#ifndef conicbobbel_H
#define conicbobbel_H
const char conicbobbel_source[] = R"shader_source(#version 430
layout(location=0)uniform vec2 y;layout(location=0)out vec3 v;layout(location=1)out float f;layout(location=16)uniform float m;layout(location=6)uniform float c;
#define FOCAL_LENGTH
layout(location=2)uniform float d;
#line 1
layout(location=3)uniform vec3 x;layout(location=4)uniform vec4 z;layout(location=5)uniform float l;
#ifndef FOCAL_LENGTH
layout(location=6)uniform float s;
#endif
float n=6.28319;struct Material{vec3 color;float roughness;float metallic;};struct SphereLight{vec3 center;vec3 color;float radius;float intensity;};
#line 4
layout(location=17)uniform vec3 w;layout(location=18)uniform vec3 r;layout(location=19)uniform float i;layout(location=20)uniform float a;layout(location=21)uniform float F;layout(location=22)uniform float g;vec3 M[4]=vec3[4](vec3(.03,0.,0.),vec3(0.),w,r);void t(vec3 x,float z){float m=m,l=s,n=d;f=(z-m)/z*(l*l)/(n*(m-l))/.03*y.x;v=x;}vec3 p(vec3 y,vec4 v){vec3 f=2*cross(v.xyz,y);return y+v.w*f+cross(v.xyz,f);}vec3 p(){vec3 v=normalize(vec3((gl_FragCoord.xy-.5*y)/y.x,-s/.03));return p(v,z);}float h(vec3 v,float y){return length(v)-y;}float h(vec3 v,vec3 y,vec3 f,float x){vec3 l=v-y,z=f-y;float m=clamp(dot(l,z)/dot(z,z),0.,1.);return length(l-z*m)-x;}float e(vec3 v,vec2 y){vec2 f=vec2(length(v.xz)-y.x,v.y);return length(f)-y.y;}float S(vec3 v,vec3 y){return v=abs(v)-y,max(v.x,max(v.y,v.z));}float o(vec2 v,vec2 y){return v=abs(v)-y,max(v.x,v.y);}float u(vec3 v,vec3 y){vec3 f=abs(v)-y;return min(max(f.x,max(f.y,f.z)),0.)+length(max(f,0.));}float S(vec3 v,vec3 f,float y){return u(v,f-y)-y;}float b(vec3 v,vec2 y){float f=length(v.xy);return dot(y,vec2(f,v.z));}float L(vec3 v,vec3 y){return dot(v,y.xyz);}vec2 C(vec2 v,vec2 y){return mix(v,y,float(v.x>y.x));}float C(float y,float v,float x){float f=clamp(.5+.5*(v-y)/x,0.,1.);return mix(v,y,f)-x*f*(1.-f);}vec2 L(vec2 v,vec2 f,float y){return vec2(C(v,f,y),v.x>f.x?f.y:v.y);}vec2 b(vec2 y,vec2 v,float x){float f=clamp(.5+.5*(v-y)/x,0.,1.);return vec2(mix(v.x,y.x,f)-x*f*(1.-f),mix(v.y,y.y,f));}float e(float y,float v,float x){float f=clamp(.5-.5*(v-y)/x,0.,1.);return mix(v,y,f)+x*f*(1.-f);}float T(vec3 v,vec3 y){return max(0.,dot(v,y));}float C(float y){return y*y;}vec3 C(vec3 v,vec3 y,vec3 f,Material m,SphereLight x){vec3 l=x.center-v,z=reflect(-f,y),n=dot(l,z)*z-l,d=l+n*clamp(x.radius/length(n),0.,1.),s=normalize(d);float w=distance(v,x.center),c=acos(-1.);vec3 i=.5*(s+f);float M=dot(y,i),r=T(y,s),a=dot(y,f),k=C(m.roughness),Y=C(k),o=C(m.roughness+1.),E=Y/(4.*mix(r,1.,o)*mix(a,1.,o)*c*C(C(M)*(Y-1.)+1.)),P=clamp(k+x.radius*.5/w,0.,1.),F=Y/(P*P),e=dot(f,i),g=exp2((-5.55473*e-6.98316)*e),S=.04+.96*g;vec3 p=m.color+(1.-m.color)*g,W=.5*(m.color/c+E*S),t=E*p;float h=C(1.-C(C(w/x.radius))),G=clamp(h,0.,1.)/(C(w)+1.);return r*mix(W,t,m.metallic)*G*x.intensity*x.color*F;}vec3 O(vec3 y,float x){return y*x;}vec3 N(vec3 v,vec3 y){return mod(v,y)-.5*y;}vec3 C(vec3 v,float y,float f,float x){return N(v,vec3(y,f,x));}vec3 H(vec3 y,vec3 x){return y-x;}vec3 H(vec3 v,float y,float f,float x){return H(v,vec3(y,f,x));}mat3 H(float v){return mat3(1.,0.,0.,0.,cos(v),sin(v),0.,-sin(v),cos(v));}mat3 L(float v){return mat3(cos(v),0.,-sin(v),0.,1.,0.,sin(v),0.,cos(v));}mat3 N(float v){return mat3(cos(v),sin(v),0.,-sin(v),cos(v),0.,0.,0.,1.);}mat2 O(float v){return mat2(cos(v),-sin(v),sin(v),cos(v));}float G(float v,float y){const float x=v*y;return x*exp(1.-x);}float G(float y,float v,float f){return clamp((f-y)/(v-y),0.,1.);}float G(float v){return v-floor(v*(1./289.))*289.;}vec2 S(vec2 v){return v-floor(v*(1./289.))*289.;}vec3 T(vec3 v){return v-floor(v*(1./289.))*289.;}vec4 b(vec4 v){return v-floor(v*(1./289.))*289.;}float e(float v){return b((v*34.+1.)*v);}vec2 h(vec2 v){return b((v*34.+1.)*v);}vec3 o(vec3 v){return b((v*34.+1.)*v);}vec4 p(vec4 v){return b((v*34.+1.)*v);}vec4 t(vec4 y){return 1.79284-.853735*y;}vec2 u(vec2 v){return v*v*v*(v*(v*6.-15.)+10.);}vec3 E(vec3 v){return v*v*v*(v*(v*6.-15.)+10.);}float A(vec2 v){vec4 f=floor(v.xyxy)+vec4(0.,0.,1.,1.),m=fract(v.xyxy)-vec4(0.,0.,1.,1.);f=b(f);vec4 y=f.xzxz,x=f.yyww,l=m.xzxz,n=m.yyww,d=p(p(y)+x),z=fract(d*(1./41.))*2.-1.,s=abs(z)-.5,a=floor(z+.5);z=z-a;vec2 r=vec2(z.x,s.x),w=vec2(z.y,s.y),c=vec2(z.z,s.z),i=vec2(z.w,s.w);vec4 Y=t(vec4(dot(r,r),dot(c,c),dot(w,w),dot(i,i)));r*=Y.x;c*=Y.y;w*=Y.z;i*=Y.w;float M=dot(r,vec2(l.x,n.x)),k=dot(w,vec2(l.y,n.y)),o=dot(c,vec2(l.z,n.z)),P=dot(i,vec2(l.w,n.w));vec2 F=E(m.xy),W=mix(vec2(M,o),vec2(k,P),F.x);float g=mix(W.x,W.y,F.y);return 2.3*g;}float k(vec3 v){vec3 f=floor(v),y=f+vec3(1.);f=b(f);y=b(y);vec3 m=fract(v),x=m-vec3(1.);vec4 z=vec4(f.x,y.x,f.x,y.x),n=vec4(f.yy,y.yy),s=f.zzzz,d=y.zzzz,l=p(p(z)+n),Y=p(l+s),c=p(l+d),r=Y*(1./7.),i=fract(floor(r)*(1./7.))-.5;r=fract(r);vec4 w=vec4(.5)-abs(r)-abs(i),a=step(w,vec4(0.));r-=a*(step(0.,r)-.5);i-=a*(step(0.,i)-.5);vec4 M=c*(1./7.),o=fract(floor(M)*(1./7.))-.5;M=fract(M);vec4 W=vec4(.5)-abs(M)-abs(o),P=step(W,vec4(0.));M-=P*(step(0.,M)-.5);o-=P*(step(0.,o)-.5);vec3 k=vec3(r.x,i.x,w.x),g=vec3(r.y,i.y,w.y),F=vec3(r.z,i.z,w.z),S=vec3(r.w,i.w,w.w),h=vec3(M.x,o.x,W.x),e=vec3(M.y,o.y,W.y),G=vec3(M.z,o.z,W.z),C=vec3(M.w,o.w,W.w);vec4 N=t(vec4(dot(k,k),dot(F,F),dot(g,g),dot(S,S)));k*=N.x;F*=N.y;g*=N.z;S*=N.w;vec4 u=t(vec4(dot(h,h),dot(G,G),dot(e,e),dot(C,C)));h*=u.x;G*=u.y;e*=u.z;C*=u.w;float H=dot(k,m),L=dot(g,vec3(x.x,m.yz)),T=dot(F,vec3(m.x,x.y,m.z)),O=dot(S,vec3(x.xy,m.z)),A=dot(h,vec3(m.xy,x.z)),Z=dot(e,vec3(x.x,m.y,x.z)),X=dot(G,vec3(m.x,x.yz)),V=dot(C,x);vec3 U=E(m);vec4 R=mix(vec4(H,L,T,O),vec4(A,Z,X,V),U.z);vec2 Q=mix(R.xy,R.zw,U.y);float K=mix(Q.x,Q.y,U.x);return 2.2*K;}float Z(vec2 v){vec2 y=b(v),f=p(y);return fract(p(f.x*f.y+y.x+y.y)/41.)*2.-1.;}float Y(vec3 v){vec3 y=b(v),f=p(y);return fract(p(f.x*f.y*f.z+y.x+y.y+y.z)/41.)*2.-1.;}float X(vec2 v){vec2 f=floor(v),y=fract(v),m=vec2(1.,0.);float x=Y(f+m.yy),l=Y(f+m.yx),n=Y(f+m.xy),z=Y(f+m.xx);y=E(y);return mix(mix(x,n,y.x),mix(l,z,y.x),y.y);}float W(vec3 v){vec3 f=floor(v),y=fract(v);vec2 m=vec2(1.,0.);float x=Y(f+m.yyy),l=Y(f+m.yyx),z=Y(f+m.yxy),n=Y(f+m.yxx),w=Y(f+m.xyy),s=Y(f+m.xyx),i=Y(f+m.xxy),d=Y(f+m.xxx);y=E(y);return mix(mix(mix(x,w,y.x),mix(z,i,y.x),y.y),mix(mix(l,s,y.x),mix(n,d,y.x),y.y),y.z);}float V(vec2 v){return(k(v)+k(v*2.)*.5+k(v*4.)*.25)/1.75;}float U(vec3 v){return(k(v)+k(v*2.)*.5+k(v*4.)*.25)/1.75;}float R(vec2 v){return(W(v)+W(v*2.)*.5+W(v*4.)*.25)/1.75;}float Q(vec3 v){return(W(v)+W(v*2.)*.5+W(v*4.)*.25)/1.75;}float A(vec3 v,float y){float f=smoothstep(y*.3,y,v.x)+.3*(1.-smoothstep(0.,y*.3,v.x)),x=.5,z=.15,m=mix(z,x,f),r=h(v,vec3(y,0.,0.),vec3(0.,0.,0.),m),s=8.,d=.8,w=7.;vec3 i=H(v,y*.9,0.,0.);i.yz=vec2(length(i.yz),atan(i.y,i.z)/n);vec3 Y=i;i=C(i,1.,1.,1./s);i.xy=Y.xy;i.y-=d;i.z*=3.2;i=N(n*-(clamp(i.y,-10.,.5)+1.)/7.)*i;float c=b(i.xzy,normalize(vec2(w,1.)));r=C(r,c,.1);vec2 M=vec2(v.x*3.+l,atan(v.y,v.z));r-=smoothstep(g,1.,k(M*F))*.03;return r;}float A(vec3 v,float y,float x){float f=3.,m=f*x,z=y+.7,n=-1.,d=1.5;vec3 i=H(v,z+(n-z)*mod(l+m,f)/f,0.,0.);float w=d*G(8.,mod(l+m,f)/f),s=.2*w,c=.03,r=0.;r=abs(h(i,w))-s;r=e(r,abs(i.x)-c,.02);return r;}vec2 P(vec3 v){vec3 f=H(v,-1.,0.,-3.),y=vec3(30,1.,25.),m=H(f,10.*l,0.,0.);float z=floor(m.x/y.x),n=floor(m.y/y.y),r=floor(m.z/y.z);m=H(m,sin(r*r)*32.,0.,sin(z*z)*50.);vec3 w=N(m,y);w.y=m.y;w=f;float s=2.,d=A(w,s),c=A(w,s,0.);vec2 M=vec2(d,2.),o=vec2(c,3.),k=b(M,o,i),W=vec2(v.y+2.,0.),a=vec2(-h(v-x,300.),1.);return C(k,C(W,a));}vec3 A(vec3 v,vec3 y,out int f,int x,float z){float r=0.;for(f=0;f<x;f++){float m=P(v)[0]*z;v+=y*m;m=abs(m);r+=m;if(m<.001*r)break;}return v;}vec3 E(vec3 v,vec3 y,out int f){return A(v,y,f,100,1.);}vec3 K(vec3 v){vec2 y=vec2(.001,0.);return normalize(vec3(P(v+y.xyy)[0]-P(v-y.xyy)[0],P(v+y.yxy)[0]-P(v-y.yxy)[0],P(v+y.yyx)[0]-P(v-y.yyx)[0])+1e-09);}float A(vec3 v,vec3 y,float f,float x){float m,z=sign(f);for(m=z*.5+.5;x>0;x--)m-=(x*f-P(v+y*x*f*z)[0])/exp2(x);return m;}void main(){vec3 v=p();int y;vec3 f=A(x,v,y,100,1.),m=vec3(0.);float z=P(f)[1];vec3 n=K(f);SphereLight i=SphereLight(vec3(5.,9.,10.),vec3(1.),2.,100.);if(z==0.){float r=2.,w=mod(floor(f.x/r),2.);Material s=Material(M[int(z)]*w,.5,0.);m=C(f,n,-v,s,i);}else if(z==1.){Material w=Material(M[int(z)],1.,0.);m=C(f,n,-v,w,i);}else if(z>=2.&&z<=3.){Material w=Material(M[2],.2,1.);vec3 l=C(f,n,-v,w,i),s=O(M[3],a);float r=pow(z-2.,6.);m=mix(l,s,r);}else{Material w=Material(M[int(z)],.2,1.);m=C(f,n,-v,w,i);}t(m,4.01);})shader_source";
#endif
