#ifndef conicbobbel_H
#define conicbobbel_H
const char conicbobbel_source[] = R"shader_source(#version 430
layout(location=0)uniform vec2 y;layout(location=0)out vec3 v;layout(location=1)out float f;layout(location=2)out float r;layout(location=17)uniform float m;layout(location=5)uniform float c;
#define FOCAL_LENGTH
layout(location=1)uniform float d;
#line 1
layout(location=2)uniform vec3 x;layout(location=3)uniform vec4 z;layout(location=4)uniform float l;
#ifndef FOCAL_LENGTH
layout(location=5)uniform float s;
#endif
float n=6.28319;struct Material{vec3 color;float roughness;float metallic;};struct SphereLight{vec3 center;vec3 color;float radius;float intensity;};
#line 4
layout(location=18)uniform vec3 w;layout(location=19)uniform vec3 i;layout(location=20)uniform float a;layout(location=21)uniform float F;layout(location=22)uniform float o;vec3 g[4]=vec3[4](vec3(.03,0.,0.),vec3(0.),w,i);void t(vec3 m,float x){float z=z,l=s,n=d;r=(x-z)/x*(l*l)/(n*(z-l))/.03*y.x;v=m;f=log(max(dot(m,vec3(.2126,.7152,.0722)),1e-06));}vec3 p(vec3 y,vec4 v){vec3 f=2*cross(v.xyz,y);return y+v.w*f+cross(v.xyz,f);}vec3 p(){vec3 v=normalize(vec3((gl_FragCoord.xy-.5*y)/y.x,-s/.03));return p(v,z);}float h(vec3 v,float y){return length(v)-y;}float h(vec3 v,vec3 y,vec3 f,float x){vec3 l=v-y,z=f-y;float n=clamp(dot(l,z)/dot(z,z),0.,1.);return length(l-z*n)-x;}float e(vec3 v,vec2 y){vec2 f=vec2(length(v.xz)-y.x,v.y);return length(f)-y.y;}float M(vec3 v,vec3 y){return v=abs(v)-y,max(v.x,max(v.y,v.z));}float S(vec2 v,vec2 y){return v=abs(v)-y,max(v.x,v.y);}float u(vec3 v,vec3 y){vec3 f=abs(v)-y;return min(max(f.x,max(f.y,f.z)),0.)+length(max(f,0.));}float M(vec3 v,vec3 f,float y){return u(v,f-y)-y;}float b(vec3 v,vec2 y){float f=length(v.xy);return dot(y,vec2(f,v.z));}float L(vec3 v,vec3 y){return dot(v,y.xyz);}vec2 C(vec2 v,vec2 y){return mix(v,y,float(v.x>y.x));}float C(float y,float v,float x){float f=clamp(.5+.5*(v-y)/x,0.,1.);return mix(v,y,f)-x*f*(1.-f);}vec2 L(vec2 v,vec2 f,float y){return vec2(C(v,f,y),v.x>f.x?f.y:v.y);}vec2 S(vec2 v,vec2 y,float x){float f=clamp(.5+.5*(y-v)/x,0.,1.);return vec2(mix(y.x,v.x,f)-x*f*(1.-f),mix(y.y,v.y,f));}float b(float y,float v,float x){float f=clamp(.5-.5*(v-y)/x,0.,1.);return mix(v,y,f)+x*f*(1.-f);}float T(vec3 v,vec3 y){return max(0.,dot(v,y));}float C(float y){return y*y;}vec3 C(vec3 v,vec3 y,vec3 f,Material m,SphereLight x){vec3 l=x.center-v,z=reflect(-f,y),n=dot(l,z)*z-l,d=l+n*clamp(x.radius/length(n),0.,1.),s=normalize(d);float w=distance(v,x.center),c=acos(-1.);vec3 i=.5*(s+f);float g=dot(y,i),r=T(y,s),a=dot(y,f),o=C(m.roughness),Y=C(o),P=C(m.roughness+1.),M=Y/(4.*mix(r,1.,P)*mix(a,1.,P)*c*C(C(g)*(Y-1.)+1.)),k=clamp(o+x.radius*.5/w,0.,1.),F=Y/(k*k),e=dot(f,i),S=exp2((-5.55473*e-6.98316)*e),G=.04+.96*S;vec3 p=m.color+(1.-m.color)*S,W=.5*(m.color/c+M*G),t=M*p;float h=C(1.-C(C(w/x.radius))),u=clamp(h,0.,1.)/(C(w)+1.);return r*mix(W,t,m.metallic)*u*x.intensity*x.color*F;}vec3 O(vec3 y,float x){return y*x;}vec3 N(vec3 v,vec3 y){return mod(v,y)-.5*y;}vec3 C(vec3 v,float y,float f,float x){return N(v,vec3(y,f,x));}vec3 H(vec3 y,vec3 x){return y-x;}vec3 H(vec3 v,float y,float f,float x){return H(v,vec3(y,f,x));}mat3 H(float v){return mat3(1.,0.,0.,0.,cos(v),sin(v),0.,-sin(v),cos(v));}mat3 L(float v){return mat3(cos(v),0.,-sin(v),0.,1.,0.,sin(v),0.,cos(v));}mat3 M(float v){return mat3(cos(v),sin(v),0.,-sin(v),cos(v),0.,0.,0.,1.);}mat2 N(float v){return mat2(cos(v),-sin(v),sin(v),cos(v));}float G(float v,float y){const float x=v*y;return x*exp(1.-x);}float G(float y,float v,float f){return clamp((f-y)/(v-y),0.,1.);}float G(float v){return v-floor(v*(1./289.))*289.;}vec2 O(vec2 v){return v-floor(v*(1./289.))*289.;}vec3 S(vec3 v){return v-floor(v*(1./289.))*289.;}vec4 T(vec4 v){return v-floor(v*(1./289.))*289.;}float b(float v){return T((v*34.+1.)*v);}vec2 e(vec2 v){return T((v*34.+1.)*v);}vec3 h(vec3 v){return T((v*34.+1.)*v);}vec4 p(vec4 v){return T((v*34.+1.)*v);}vec4 t(vec4 y){return 1.79284-.853735*y;}vec2 u(vec2 v){return v*v*v*(v*(v*6.-15.)+10.);}vec3 E(vec3 v){return v*v*v*(v*(v*6.-15.)+10.);}float A(vec2 v){vec4 f=floor(v.xyxy)+vec4(0.,0.,1.,1.),m=fract(v.xyxy)-vec4(0.,0.,1.,1.);f=T(f);vec4 y=f.xzxz,x=f.yyww,l=m.xzxz,n=m.yyww,d=p(p(y)+x),z=fract(d*(1./41.))*2.-1.,s=abs(z)-.5,a=floor(z+.5);z=z-a;vec2 r=vec2(z.x,s.x),w=vec2(z.y,s.y),c=vec2(z.z,s.z),i=vec2(z.w,s.w);vec4 Y=t(vec4(dot(r,r),dot(c,c),dot(w,w),dot(i,i)));r*=Y.x;c*=Y.y;w*=Y.z;i*=Y.w;float g=dot(r,vec2(l.x,n.x)),o=dot(w,vec2(l.y,n.y)),P=dot(c,vec2(l.z,n.z)),k=dot(i,vec2(l.w,n.w));vec2 F=E(m.xy),W=mix(vec2(g,P),vec2(o,k),F.x);float S=mix(W.x,W.y,F.y);return 2.3*S;}float k(vec3 v){vec3 f=floor(v),y=f+vec3(1.);f=T(f);y=T(y);vec3 x=fract(v),z=x-vec3(1.);vec4 l=vec4(f.x,y.x,f.x,y.x),n=vec4(f.yy,y.yy),s=f.zzzz,d=y.zzzz,m=p(p(l)+n),Y=p(m+s),c=p(m+d),r=Y*(1./7.),i=fract(floor(r)*(1./7.))-.5;r=fract(r);vec4 w=vec4(.5)-abs(r)-abs(i),a=step(w,vec4(0.));r-=a*(step(0.,r)-.5);i-=a*(step(0.,i)-.5);vec4 g=c*(1./7.),P=fract(floor(g)*(1./7.))-.5;g=fract(g);vec4 W=vec4(.5)-abs(g)-abs(P),M=step(W,vec4(0.));g-=M*(step(0.,g)-.5);P-=M*(step(0.,P)-.5);vec3 o=vec3(r.x,i.x,w.x),k=vec3(r.y,i.y,w.y),S=vec3(r.z,i.z,w.z),F=vec3(r.w,i.w,w.w),h=vec3(g.x,P.x,W.x),e=vec3(g.y,P.y,W.y),u=vec3(g.z,P.z,W.z),G=vec3(g.w,P.w,W.w);vec4 N=t(vec4(dot(o,o),dot(S,S),dot(k,k),dot(F,F)));o*=N.x;S*=N.y;k*=N.z;F*=N.w;vec4 b=t(vec4(dot(h,h),dot(u,u),dot(e,e),dot(G,G)));h*=b.x;u*=b.y;e*=b.z;G*=b.w;float C=dot(o,x),L=dot(k,vec3(z.x,x.yz)),O=dot(S,vec3(x.x,z.y,x.z)),H=dot(F,vec3(z.xy,x.z)),A=dot(h,vec3(x.xy,z.z)),Z=dot(e,vec3(z.x,x.y,z.z)),X=dot(u,vec3(x.x,z.yz)),V=dot(G,z);vec3 U=E(x);vec4 R=mix(vec4(C,L,O,H),vec4(A,Z,X,V),U.z);vec2 Q=mix(R.xy,R.zw,U.y);float K=mix(Q.x,Q.y,U.x);return 2.2*K;}float Z(vec2 v){vec2 y=T(v),f=p(y);return fract(p(f.x*f.y+y.x+y.y)/41.)*2.-1.;}float Y(vec3 v){vec3 y=T(v),f=p(y);return fract(p(f.x*f.y*f.z+y.x+y.y+y.z)/41.)*2.-1.;}float X(vec2 v){vec2 f=floor(v),y=fract(v),n=vec2(1.,0.);float x=Y(f+n.yy),z=Y(f+n.yx),w=Y(f+n.xy),m=Y(f+n.xx);y=E(y);return mix(mix(x,w,y.x),mix(z,m,y.x),y.y);}float W(vec3 v){vec3 f=floor(v),y=fract(v);vec2 n=vec2(1.,0.);float x=Y(f+n.yyy),z=Y(f+n.yyx),l=Y(f+n.yxy),m=Y(f+n.yxx),w=Y(f+n.xyy),s=Y(f+n.xyx),i=Y(f+n.xxy),d=Y(f+n.xxx);y=E(y);return mix(mix(mix(x,w,y.x),mix(l,i,y.x),y.y),mix(mix(z,s,y.x),mix(m,d,y.x),y.y),y.z);}float V(vec2 v){return(k(v)+k(v*2.)*.5+k(v*4.)*.25)/1.75;}float U(vec3 v){return(k(v)+k(v*2.)*.5+k(v*4.)*.25)/1.75;}float R(vec2 v){return(W(v)+W(v*2.)*.5+W(v*4.)*.25)/1.75;}float Q(vec3 v){return(W(v)+W(v*2.)*.5+W(v*4.)*.25)/1.75;}float A(vec3 v,float y){float f=smoothstep(y*.3,y,v.x)+.3*(1.-smoothstep(0.,y*.3,v.x)),x=.5,z=.15,s=mix(z,x,f),m=h(v,vec3(y,0.,0.),vec3(0.,0.,0.),s),i=8.,d=.8,w=7.;vec3 r=H(v,y,0.,0.);r.yz=vec2(length(r.yz),atan(r.y,r.z)/n);vec3 Y=r;r=C(r,1.,1.,1./i);r.xy=Y.xy;r.y-=d;r.z*=3.2;float c=b(r.xzy,normalize(vec2(w,1.)));m=C(m,c,.1);vec2 g=vec2(v.x*3.+l,atan(v.y,v.z));m-=smoothstep(0.,1.,k(g*1.5))*.03;return m;}float A(vec3 v,float y,float x){float f=3.,n=f*x,z=y+.7,m=-1.,d=1.5;vec3 r=H(v,z+(m-z)*mod(l+n,f)/f,0.,0.);float w=d*G(8.,mod(l+n,f)/f),s=.2*w,i=.03,g=0.;g=abs(h(r,w))-s;g=b(g,abs(r.x)-i,.02);return g;}vec2 P(vec3 v){vec3 y=H(v,-1.,0.,-3.),f=vec3(30,1.,25.),r=H(y,10.*l,0.,0.);float z=floor(r.x/f.x),n=floor(r.y/f.y),m=floor(r.z/f.z);r=H(r,sin(m*m)*32.,0.,sin(z*z)*50.);vec3 w=N(r,f);w.y=r.y;w=y;float i=2.,s=A(w,i),g=A(w,i,0.);g=min(g,A(w,i,1/2.5));vec2 c=vec2(s,2.),d=vec2(g,3.),P=S(c,d,a),o=vec2(v.y+2.,0.),k=vec2(-h(v-x,300.),1.);return C(P,C(o,k));}vec3 A(vec3 v,vec3 y,out int f,int x,float z){float r=0.;for(f=0;f<x;f++){float m=P(v)[0]*z;v+=y*m;m=abs(m);r+=m;if(m<.001*r)break;}return v;}vec3 E(vec3 v,vec3 y,out int f){return A(v,y,f,100,1.);}vec3 K(vec3 v){vec2 y=vec2(.001,0.);return normalize(vec3(P(v+y.xyy)[0]-P(v-y.xyy)[0],P(v+y.yxy)[0]-P(v-y.yxy)[0],P(v+y.yyx)[0]-P(v-y.yyx)[0])+1e-09);}void main(){vec3 v=p();int y;vec3 f=A(x,v,y,100,1.),r=vec3(0.);float z=P(f)[1];vec3 m=K(f);SphereLight n=SphereLight(vec3(5.,9.,10.),vec3(1.),2.,100.);if(z==0.){float i=2.,w=mod(floor(f.x/i),2.);Material d=Material(g[int(z)]*w,.5,0.);r=C(f,m,-v,d,n);}else if(z==1.){Material w=Material(g[int(z)],1.,0.);r=C(f,m,-v,w,n);}else if(z>=2.&&z<=3.){Material w=Material(g[2],.2,1.);vec3 l=C(f,m,-v,w,n),i=O(g[int(z)],o);float d=pow(z-2.,6.);r=mix(l,i,d);}else{Material w=Material(g[int(z)],.2,1.);r=C(f,m,-v,w,n);}t(r,4.01);})shader_source";
#endif
