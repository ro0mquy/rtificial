#ifndef schalter_H
#define schalter_H
const char schalter_source[] = R"shader_source(#version 430
layout(location=0)uniform vec2 y;layout(location=0)out vec3 f;layout(location=1)out float v;layout(location=16)uniform float m;layout(location=6)uniform float M;
#define FOCAL_LENGTH
layout(location=2)uniform float d;
#line 1
layout(location=3)uniform vec3 x;layout(location=4)uniform vec4 z;layout(location=5)uniform float c;
#ifndef FOCAL_LENGTH
layout(location=6)uniform float a;
#endif
float l=6.28319;struct Material{vec3 color;float roughness;float metallic;};struct SphereLight{vec3 center;vec3 color;float radius;float intensity;};
#line 4
layout(location=26)uniform float s;layout(location=27)uniform float w;layout(location=28)uniform float r;layout(location=29)uniform float i;layout(location=30)uniform float S;Material n[5]=Material[5](Material(vec3(.1,.1,.1),.5,0.),Material(vec3(1.),.5,0.),Material(vec3(.1,.3,.1),1.,0.),Material(vec3(.7,.3,.2),1.,0.),Material(vec3(1.),.5,0.));
#define MATERIAL_ID_FLOOR 0.
#define MATERIAL_ID_BOUNDING 1.
#define MATERIAL_ID_PYRAMID 2.
#define MATERIAL_ID_CUBE 3.
#define MATERIAL_ID_LIGHTBALL 4.
void t(vec3 m,float z){float x=x,s=a,l=d;v=(z-x)/z*(s*s)/(l*(x-s))/.03*y.x;f=m;}vec3 p(vec3 y,vec4 v){vec3 f=2*cross(v.xyz,y);return y+v.w*f+cross(v.xyz,f);}vec3 p(){vec3 v=normalize(vec3((gl_FragCoord.xy-.5*y)/y.x,-a/.03));return p(v,z);}float h(vec3 v,float y){return length(v)-y;}float h(vec3 v,vec3 x,vec3 m,float y){vec3 f=v-x,z=m-x;float n=clamp(dot(f,z)/dot(z,z),0.,1.);return length(f-z*n)-y;}float e(vec3 v,vec2 y){vec2 f=vec2(length(v.xz)-y.x,v.y);return length(f)-y.y;}float F(vec3 v,vec3 y){return v=abs(v)-y,max(v.x,max(v.y,v.z));}float o(vec2 v,vec2 y){return v=abs(v)-y,max(v.x,v.y);}float u(vec3 v,vec3 y){vec3 f=abs(v)-y;return min(max(f.x,max(f.y,f.z)),0.)+length(max(f,0.));}float F(vec3 v,vec3 f,float y){return u(v,f-y)-y;}float I(vec3 v,vec2 y){float f=length(v.xy);return dot(y,vec2(f,v.z));}float A(vec3 v,vec3 y){return dot(v,y.xyz);}vec2 L(vec2 v,vec2 y){return mix(v,y,float(v.x>y.x));}float A(float v,float f,float y){float s=clamp(.5+.5*(f-v)/y,0.,1.);return mix(f,v,s)-y*s*(1.-s);}vec2 I(vec2 v,vec2 f,float y){return vec2(A(v,f,y),v.x>f.x?f.y:v.y);}vec2 L(vec2 v,vec2 f,float y){float s=clamp(.5+.5*(f-v)/y,0.,1.);return vec2(mix(f.x,v.x,s)-y*s*(1.-s),mix(f.y,v.y,s));}float e(float v,float f,float y){float s=clamp(.5-.5*(f-v)/y,0.,1.);return mix(f,v,s)+y*s*(1.-s);}float R(vec3 v,vec3 y){return max(0.,dot(v,y));}float A(float y){return y*y;}vec3 A(vec3 v,vec3 y,vec3 f,Material m,SphereLight s){vec3 x=s.center-v,z=reflect(-f,y),l=dot(x,z)*z-x,r=x+l*clamp(s.radius/length(l),0.,1.),n=normalize(r);float w=distance(v,s.center),M=acos(-1.);vec3 d=.5*(n+f);float c=dot(y,d),i=R(y,n),S=dot(y,f),Z=A(m.roughness),G=A(Z),L=A(m.roughness+1.),a=G/(4.*mix(i,1.,L)*mix(S,1.,L)*M*A(A(c)*(G-1.)+1.)),U=clamp(Z+s.radius*.5/w,0.,1.),o=G/(U*U),e=dot(f,d),k=exp2((-5.55473*e-6.98316)*e),E=.04+.96*k;vec3 F=m.color+(1.-m.color)*k,B=.5*(m.color/M+a*E),t=a*F;float p=A(1.-A(A(w/s.radius))),h=clamp(p,0.,1.)/(A(w)+1.);return i*mix(B,t,m.metallic)*h*s.intensity*s.color*o;}vec3 E(vec3 y,float v){return y*v;}vec3 T(vec3 v,vec3 y){return mod(v,y)-.5*y;}vec3 A(vec3 v,float f,float y,float s){return T(v,vec3(f,y,s));}vec3 D(vec3 v,vec3 y){return v-y;}vec3 D(vec3 v,float f,float y,float s){return D(v,vec3(f,y,s));}mat3 D(float v){return mat3(1.,0.,0.,0.,cos(v),sin(v),0.,-sin(v),cos(v));}mat3 E(float v){return mat3(cos(v),0.,-sin(v),0.,1.,0.,sin(v),0.,cos(v));}mat3 F(float v){return mat3(cos(v),sin(v),0.,-sin(v),cos(v),0.,0.,0.,1.);}mat2 I(float v){return mat2(cos(v),-sin(v),sin(v),cos(v));}float g(float v,float y){const float s=v*y;return s*exp(1.-s);}float D(float y,float v,float f){return clamp((f-y)/(v-y),0.,1.);}float L(float v){return v-floor(v*(1./289.))*289.;}vec2 R(vec2 v){return v-floor(v*(1./289.))*289.;}vec3 T(vec3 v){return v-floor(v*(1./289.))*289.;}vec4 e(vec4 v){return v-floor(v*(1./289.))*289.;}float g(float v){return e((v*34.+1.)*v);}vec2 h(vec2 v){return e((v*34.+1.)*v);}vec3 o(vec3 v){return e((v*34.+1.)*v);}vec4 p(vec4 v){return e((v*34.+1.)*v);}vec4 t(vec4 y){return 1.79284-.853735*y;}vec2 u(vec2 v){return v*v*v*(v*(v*6.-15.)+10.);}vec3 b(vec3 v){return v*v*v*(v*(v*6.-15.)+10.);}float O(vec2 v){vec4 f=floor(v.xyxy)+vec4(0.,0.,1.,1.),m=fract(v.xyxy)-vec4(0.,0.,1.,1.);f=e(f);vec4 y=f.xzxz,s=f.yyww,l=m.xzxz,n=m.yyww,d=p(p(y)+s),r=fract(d*(1./41.))*2.-1.,M=abs(r)-.5,z=floor(r+.5);r=r-z;vec2 x=vec2(r.x,M.x),w=vec2(r.y,M.y),i=vec2(r.z,M.z),c=vec2(r.w,M.w);vec4 G=t(vec4(dot(x,x),dot(i,i),dot(w,w),dot(c,c)));x*=G.x;i*=G.y;w*=G.z;c*=G.w;float S=dot(x,vec2(l.x,n.x)),Z=dot(w,vec2(l.y,n.y)),L=dot(i,vec2(l.z,n.z)),E=dot(c,vec2(l.w,n.w));vec2 F=b(m.xy),B=mix(vec2(S,L),vec2(Z,E),F.x);float k=mix(B.x,B.y,F.y);return 2.3*k;}float B(vec3 v){vec3 f=floor(v),y=f+vec3(1.);f=e(f);y=e(y);vec3 m=fract(v),s=m-vec3(1.);vec4 x=vec4(f.x,y.x,f.x,y.x),z=vec4(f.yy,y.yy),r=f.zzzz,n=y.zzzz,l=p(p(x)+z),d=p(l+r),M=p(l+n),c=d*(1./7.),i=fract(floor(c)*(1./7.))-.5;c=fract(c);vec4 w=vec4(.5)-abs(c)-abs(i),G=step(w,vec4(0.));c-=G*(step(0.,c)-.5);i-=G*(step(0.,i)-.5);vec4 L=M*(1./7.),Z=fract(floor(L)*(1./7.))-.5;L=fract(L);vec4 S=vec4(.5)-abs(L)-abs(Z),a=step(S,vec4(0.));L-=a*(step(0.,L)-.5);Z-=a*(step(0.,Z)-.5);vec3 B=vec3(c.x,i.x,w.x),E=vec3(c.y,i.y,w.y),U=vec3(c.z,i.z,w.z),F=vec3(c.w,i.w,w.w),o=vec3(L.x,Z.x,S.x),A=vec3(L.y,Z.y,S.y),k=vec3(L.z,Z.z,S.z),h=vec3(L.w,Z.w,S.w);vec4 u=t(vec4(dot(B,B),dot(U,U),dot(E,E),dot(F,F)));B*=u.x;U*=u.y;E*=u.z;F*=u.w;vec4 R=t(vec4(dot(o,o),dot(k,k),dot(A,A),dot(h,h)));o*=R.x;k*=R.y;A*=R.z;h*=R.w;float T=dot(B,m),I=dot(E,vec3(s.x,m.yz)),D=dot(U,vec3(m.x,s.y,m.z)),g=dot(F,vec3(s.xy,m.z)),O=dot(o,vec3(m.xy,s.z)),N=dot(A,vec3(s.x,m.y,s.z)),C=dot(k,vec3(m.x,s.yz)),H=dot(h,s);vec3 Y=b(m);vec4 P=mix(vec4(T,I,D,g),vec4(O,N,C,H),Y.z);vec2 X=mix(P.xy,P.zw,Y.y);float W=mix(X.x,X.y,Y.x);return 2.2*W;}float N(vec2 v){vec2 y=e(v),f=p(y);return fract(p(f.x*f.y+y.x+y.y)/41.)*2.-1.;}float G(vec3 v){vec3 y=e(v),f=p(y);return fract(p(f.x*f.y*f.z+y.x+y.y+y.z)/41.)*2.-1.;}float C(vec2 v){vec2 f=floor(v),y=fract(v),s=vec2(1.,0.);float x=G(f+s.yy),m=G(f+s.yx),n=G(f+s.xy),z=G(f+s.xx);y=b(y);return mix(mix(x,n,y.x),mix(m,z,y.x),y.y);}float U(vec3 v){vec3 f=floor(v),y=fract(v);vec2 s=vec2(1.,0.);float x=G(f+s.yyy),m=G(f+s.yyx),l=G(f+s.yxy),z=G(f+s.yxx),n=G(f+s.xyy),w=G(f+s.xyx),M=G(f+s.xxy),i=G(f+s.xxx);y=b(y);return mix(mix(mix(x,n,y.x),mix(l,M,y.x),y.y),mix(mix(m,w,y.x),mix(z,i,y.x),y.y),y.z);}float H(vec2 v){return(B(v)+B(v*2.)*.5+B(v*4.)*.25)/1.75;}float Y(vec3 v){return(B(v)+B(v*2.)*.5+B(v*4.)*.25)/1.75;}float P(vec2 v){return(U(v)+U(v*2.)*.5+U(v*4.)*.25)/1.75;}float k(vec3 v){return(U(v)+U(v*2.)*.5+U(v*4.)*.25)/1.75;}float B(vec2 v,float y,float f){float s=atan(v.x,v.y),n=dot(v,v),z=.5*(1.-cos(2.*s*.5*y)),m=f*y*y/n;return 1.-step(m,z);}float C(vec3 v,float f,float y){float s=atan(f/(2*y));vec3 z=vec3(cos(s),sin(s),0.),n=vec3(-cos(s),sin(s),0.),x=vec3(0.,sin(s),cos(s)),r=vec3(0.,sin(s),-cos(s));float m;m=A(D(v,0.,-y,0.),vec3(0.,-1.,0.));m=max(m,A(v,z));m=max(m,A(v,n));m=max(m,A(v,x));m=max(m,A(v,r));return m;}vec2 Z(vec3 v){vec3 f=E(l*.05*c)*v;float y=10.;vec3 m=f;m=D(m,0.,s*y,0.);m=D(m,0.,S,0.);float n=1.-pow(max(.1,min(.9,r))/.9,2.),d=pow(max(0.,min(.1,r))/.1,2.),z=d*(1-step(.1,r))+n*step(.1,r),M=4.*z;m=D(m,0.,M/2.,0.);float a=D(.9,1.,r);m=D(m,0.,-(1-pow(1.-a/2.,20.)),0.);m.y=-abs(m.y);m=D(m,0.,-M/2.,0.);m.y=-y*s-m.y;float B=C(m,y*w,y*s);vec2 Z=vec2(B,MATERIAL_ID_PYRAMID);f=D(f,0.,y*s+1.,0.);f=D(f,0.,S,0.);float U=F(f,vec3(D(0.,.1,r)),.5),o=.75+smoothstep(.7,1.,r)*7.5,k=-(y*s+2.+S)*smoothstep(.75,1.,r),G=e(D(f,0.,-.5+k,0.),vec2(.5+o,.5));vec2 p=vec2(mix(U,G,smoothstep(.65,.75,r)),MATERIAL_ID_CUBE);float T=-(y*s+2.+S)-2.*D(.5,1.,i),t=8.25+i*10,g=.5-.5*D(.5,1.,i),O=e(D(f,0.,-.5+T,0.),vec2(.5+t,g));O+=100*(1.-step(.001,i));p=L(p,vec2(O,MATERIAL_ID_CUBE));float u=h(A(v,7,10.,8.),2.),H=h(v,20.);vec2 P=vec2(max(u,-H),MATERIAL_ID_LIGHTBALL),N=vec2(v.y+2.,MATERIAL_ID_FLOOR),Y=vec2(-h(v-x,50.),MATERIAL_ID_BOUNDING);return L(I(p,N,3.),L(P,L(Z,Y)));}vec3 B(vec3 v,vec3 y,out int f,int x,float s){float m=0.;for(f=0;f<x;f++){float r=Z(v)[0]*s;v+=y*r;r=abs(r);m+=r;if(r<.001*m)break;}return v;}vec3 E(vec3 v,vec3 y,out int f){return B(v,y,f,100,1.);}vec3 X(vec3 v){vec2 y=vec2(.001,0.);return normalize(vec3(Z(v+y.xyy)[0]-Z(v-y.xyy)[0],Z(v+y.yxy)[0]-Z(v-y.yxy)[0],Z(v+y.yyx)[0]-Z(v-y.yyx)[0])+1e-09);}float B(vec3 v,vec3 y,float f,float s){float m,z=sign(f);for(m=z*.5+.5;s>0;s--)m-=(s*f-Z(v+y*s*f*z)[0])/exp2(s);return m;}void main(){vec3 v=p();int y;vec3 f=E(x,v,y),m=vec3(0.);if(y<150){int s=int(Z(f).y);vec3 z=X(f);Material r=n[s];if(s==MATERIAL_ID_FLOOR){vec3 d=vec3(0.);float c=0.,M=16.,i=.003;vec3 G=G;G.xz=I(.5+l/200.*U(G.xz*.5))*G.xz;c=max(c,B(I(0.)*(G.xz-vec2(0.,0.)),M,i));c=max(c,B(I(.5)*(G.xz-vec2(10.,19.)),M,i));c=max(c,B(I(1.)*(G.xz-vec2(-10.,15.)),M,i));c=max(c,B(I(1.5)*(G.xz-vec2(7.,-19.)),M,i));c=max(c,B(I(2.)*(G.xz-vec2(-2.,-9.)),M,i));c=max(c,B(I(2.5)*(G.xz-vec2(-5.,4.)),M,i));c=max(c,B(I(3.)*(G.xz-vec2(-17.,-3.)),M,i));c=max(c,B(I(3.5)*(G.xz-vec2(14.,-13.)),M,i));c=max(c,B(I(4.)*(G.xz-vec2(22.,7.)),M,i));c=max(c,B(I(.5+l/100.*U(G.xz*.5))*(G.xz-vec2(-7.,4.)),M/2.,i));d=vec3(c);r.color=d;}m=A(f,z,-v,r,SphereLight(vec3(5.,9.,10.),vec3(1.),2.,100.));}t(m,4.1);})shader_source";
#endif
