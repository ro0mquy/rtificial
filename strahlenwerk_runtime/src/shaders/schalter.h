#ifndef schalter_H
#define schalter_H
const char schalter_source[] = R"shader_source(#version 430
layout(location=0)uniform vec2 y;layout(location=0)out vec3 f;layout(location=1)out float v;layout(location=2)out float r;layout(location=17)uniform float m;layout(location=5)uniform float M;
#define FOCAL_LENGTH
layout(location=1)uniform float d;
#line 1
layout(location=2)uniform vec3 x;layout(location=3)uniform vec4 z;layout(location=4)uniform float c;
#ifndef FOCAL_LENGTH
layout(location=5)uniform float a;
#endif
float l=6.28319;struct Material{vec3 color;float roughness;float metallic;};struct SphereLight{vec3 center;vec3 color;float radius;float intensity;};
#line 4
layout(location=26)uniform float s;layout(location=27)uniform float w;layout(location=28)uniform float i;Material n[5]=Material[5](Material(vec3(.1,.1,.1),.5,0.),Material(vec3(1.),.5,0.),Material(vec3(.1,.3,.1),1.,0.),Material(vec3(.7,.3,.2),1.,0.),Material(vec3(1.),.5,0.));
#define MATERIAL_ID_FLOOR 0.
#define MATERIAL_ID_BOUNDING 1.
#define MATERIAL_ID_PYRAMID 2.
#define MATERIAL_ID_CUBE 3.
#define MATERIAL_ID_LIGHTBALL 4.
void t(vec3 m,float z){float x=x,s=a,l=d;r=(z-x)/z*(s*s)/(l*(x-s))/.03*y.x;f=m;v=log(max(dot(m,vec3(.2126,.7152,.0722)),1e-06));}vec3 p(vec3 y,vec4 v){vec3 f=2*cross(v.xyz,y);return y+v.w*f+cross(v.xyz,f);}vec3 p(){vec3 v=normalize(vec3((gl_FragCoord.xy-.5*y)/y.x,-a/.03));return p(v,z);}float h(vec3 v,float y){return length(v)-y;}float h(vec3 v,vec3 x,vec3 m,float y){vec3 f=v-x,z=m-x;float n=clamp(dot(f,z)/dot(z,z),0.,1.);return length(f-z*n)-y;}float e(vec3 v,vec2 y){vec2 f=vec2(length(v.xz)-y.x,v.y);return length(f)-y.y;}float F(vec3 v,vec3 y){return v=abs(v)-y,max(v.x,max(v.y,v.z));}float g(vec2 v,vec2 y){return v=abs(v)-y,max(v.x,v.y);}float S(vec3 v,vec3 y){vec3 f=abs(v)-y;return min(max(f.x,max(f.y,f.z)),0.)+length(max(f,0.));}float F(vec3 v,vec3 f,float y){return S(v,f-y)-y;}float o(vec3 v,vec2 y){float f=length(v.xy);return dot(y,vec2(f,v.z));}float u(vec3 v,vec3 y){return dot(v,y.xyz);}vec2 I(vec2 v,vec2 y){return mix(v,y,float(v.x>y.x));}float I(float v,float f,float y){float z=clamp(.5+.5*(f-v)/y,0.,1.);return mix(f,v,z)-y*z*(1.-z);}vec2 S(vec2 v,vec2 f,float y){return vec2(I(v,f,y),v.x>f.x?f.y:v.y);}vec2 e(vec2 v,vec2 f,float y){float z=clamp(.5+.5*(f-v)/y,0.,1.);return vec2(mix(f.x,v.x,z)-y*z*(1.-z),mix(f.y,v.y,z));}float g(float v,float f,float y){float z=clamp(.5-.5*(f-v)/y,0.,1.);return mix(f,v,z)+y*z*(1.-z);}float A(vec3 v,vec3 y){return max(0.,dot(v,y));}float A(float y){return y*y;}vec3 A(vec3 v,vec3 y,vec3 f,Material m,SphereLight z){vec3 x=z.center-v,s=reflect(-f,y),l=dot(x,s)*s-x,n=x+l*clamp(z.radius/length(l),0.,1.),d=normalize(n);float w=distance(v,z.center),M=acos(-1.);vec3 c=.5*(d+f);float i=dot(y,c),r=A(y,d),u=dot(y,f),k=A(m.roughness),G=A(k),S=A(m.roughness+1.),a=G/(4.*mix(r,1.,S)*mix(u,1.,S)*M*A(A(i)*(G-1.)+1.)),C=clamp(k+z.radius*.5/w,0.,1.),o=G/(C*C),e=dot(f,c),I=exp2((-5.55473*e-6.98316)*e),R=.04+.96*I;vec3 F=m.color+(1.-m.color)*I,O=.5*(m.color/M+a*R),t=a*F;float p=A(1.-A(A(w/z.radius))),h=clamp(p,0.,1.)/(A(w)+1.);return r*mix(O,t,m.metallic)*h*z.intensity*z.color*o;}vec3 L(vec3 y,float z){return y*z;}vec3 R(vec3 v,vec3 y){return mod(v,y)-.5*y;}vec3 A(vec3 v,float f,float y,float z){return R(v,vec3(f,y,z));}vec3 T(vec3 v,vec3 y){return v-y;}vec3 F(vec3 v,float f,float y,float z){return T(v,vec3(f,y,z));}mat3 F(float v){return mat3(1.,0.,0.,0.,cos(v),sin(v),0.,-sin(v),cos(v));}mat3 I(float v){return mat3(cos(v),0.,-sin(v),0.,1.,0.,sin(v),0.,cos(v));}mat3 L(float v){return mat3(cos(v),sin(v),0.,-sin(v),cos(v),0.,0.,0.,1.);}mat2 R(float v){return mat2(cos(v),-sin(v),sin(v),cos(v));}float E(float v,float y){const float z=v*y;return z*exp(1.-z);}float A(float y,float v,float f){return clamp((f-y)/(v-y),0.,1.);}float E(float v){return v-floor(v*(1./289.))*289.;}vec2 S(vec2 v){return v-floor(v*(1./289.))*289.;}vec3 T(vec3 v){return v-floor(v*(1./289.))*289.;}vec4 e(vec4 v){return v-floor(v*(1./289.))*289.;}float g(float v){return e((v*34.+1.)*v);}vec2 h(vec2 v){return e((v*34.+1.)*v);}vec3 o(vec3 v){return e((v*34.+1.)*v);}vec4 p(vec4 v){return e((v*34.+1.)*v);}vec4 t(vec4 y){return 1.79284-.853735*y;}vec2 u(vec2 v){return v*v*v*(v*(v*6.-15.)+10.);}vec3 D(vec3 v){return v*v*v*(v*(v*6.-15.)+10.);}float b(vec2 v){vec4 f=floor(v.xyxy)+vec4(0.,0.,1.,1.),m=fract(v.xyxy)-vec4(0.,0.,1.,1.);f=e(f);vec4 y=f.xzxz,z=f.yyww,l=m.xzxz,n=m.yyww,s=p(p(y)+z),d=fract(s*(1./41.))*2.-1.,M=abs(d)-.5,c=floor(d+.5);d=d-c;vec2 x=vec2(d.x,M.x),r=vec2(d.y,M.y),w=vec2(d.z,M.z),i=vec2(d.w,M.w);vec4 G=t(vec4(dot(x,x),dot(w,w),dot(r,r),dot(i,i)));x*=G.x;w*=G.y;r*=G.z;i*=G.w;float O=dot(x,vec2(l.x,n.x)),u=dot(r,vec2(l.y,n.y)),S=dot(w,vec2(l.z,n.z)),R=dot(i,vec2(l.w,n.w));vec2 I=D(m.xy),k=mix(vec2(O,S),vec2(u,R),I.x);float F=mix(k.x,k.y,I.y);return 2.3*F;}float O(vec3 v){vec3 f=floor(v),y=f+vec3(1.);f=e(f);y=e(y);vec3 z=fract(v),m=z-vec3(1.);vec4 x=vec4(f.x,y.x,f.x,y.x),n=vec4(f.yy,y.yy),s=f.zzzz,M=y.zzzz,d=p(p(x)+n),G=p(d+s),c=p(d+M),l=G*(1./7.),r=fract(floor(l)*(1./7.))-.5;l=fract(l);vec4 w=vec4(.5)-abs(l)-abs(r),a=step(w,vec4(0.));l-=a*(step(0.,l)-.5);r-=a*(step(0.,r)-.5);vec4 i=c*(1./7.),k=fract(floor(i)*(1./7.))-.5;i=fract(i);vec4 I=vec4(.5)-abs(i)-abs(k),S=step(I,vec4(0.));i-=S*(step(0.,i)-.5);k-=S*(step(0.,k)-.5);vec3 u=vec3(l.x,r.x,w.x),R=vec3(l.y,r.y,w.y),O=vec3(l.z,r.z,w.z),C=vec3(l.w,r.w,w.w),o=vec3(i.x,k.x,I.x),h=vec3(i.y,k.y,I.y),F=vec3(i.z,k.z,I.z),g=vec3(i.w,k.w,I.w);vec4 A=t(vec4(dot(u,u),dot(O,O),dot(R,R),dot(C,C)));u*=A.x;O*=A.y;R*=A.z;C*=A.w;vec4 T=t(vec4(dot(o,o),dot(F,F),dot(h,h),dot(g,g)));o*=T.x;F*=T.y;h*=T.z;g*=T.w;float L=dot(u,z),E=dot(R,vec3(m.x,z.yz)),b=dot(O,vec3(z.x,m.y,z.z)),N=dot(C,vec3(m.xy,z.z)),B=dot(o,vec3(z.xy,m.z)),U=dot(h,vec3(m.x,z.y,m.z)),H=dot(F,vec3(z.x,m.yz)),Y=dot(g,m);vec3 P=D(z);vec4 Z=mix(vec4(L,E,b,N),vec4(B,U,H,Y),P.z);vec2 X=mix(Z.xy,Z.zw,P.y);float W=mix(X.x,X.y,P.x);return 2.2*W;}float N(vec2 v){vec2 y=e(v),f=p(y);return fract(p(f.x*f.y+y.x+y.y)/41.)*2.-1.;}float G(vec3 v){vec3 y=e(v),f=p(y);return fract(p(f.x*f.y*f.z+y.x+y.y+y.z)/41.)*2.-1.;}float B(vec2 v){vec2 f=floor(v),y=fract(v),z=vec2(1.,0.);float x=G(f+z.yy),m=G(f+z.yx),n=G(f+z.xy),w=G(f+z.xx);y=D(y);return mix(mix(x,n,y.x),mix(m,w,y.x),y.y);}float C(vec3 v){vec3 f=floor(v),y=fract(v);vec2 z=vec2(1.,0.);float x=G(f+z.yyy),m=G(f+z.yyx),l=G(f+z.yxy),d=G(f+z.yxx),n=G(f+z.xyy),w=G(f+z.xyx),M=G(f+z.xxy),s=G(f+z.xxx);y=D(y);return mix(mix(mix(x,n,y.x),mix(l,M,y.x),y.y),mix(mix(m,w,y.x),mix(d,s,y.x),y.y),y.z);}float U(vec2 v){return(O(v)+O(v*2.)*.5+O(v*4.)*.25)/1.75;}float H(vec3 v){return(O(v)+O(v*2.)*.5+O(v*4.)*.25)/1.75;}float Y(vec2 v){return(C(v)+C(v*2.)*.5+C(v*4.)*.25)/1.75;}float P(vec3 v){return(C(v)+C(v*2.)*.5+C(v*4.)*.25)/1.75;}float B(vec2 v,float y,float z){float f=atan(v.x,v.y),n=dot(v,v),x=.5*(1.-cos(2.*f*.5*y)),m=z*y*y/n;return 1.-step(m,x);}float C(vec3 v,float f,float y){float z=atan(f/(2*y));vec3 m=vec3(cos(z),sin(z),0.),x=vec3(-cos(z),sin(z),0.),n=vec3(0.,sin(z),cos(z)),s=vec3(0.,sin(z),-cos(z));float l;l=u(F(v,0.,-y,0.),vec3(0.,-1.,0.));l=max(l,u(v,m));l=max(l,u(v,x));l=max(l,u(v,n));l=max(l,u(v,s));return l;}vec2 k(vec3 v){vec3 f=I(l*.05*c)*v;float y=10.;vec3 z=f;z=F(z,0.,s*y,0.);float m=1.-pow(max(0.,min(.9,i))/.9,2.),n=4.*m;z=F(z,0.,n/2.,0.);float M=(max(.9,min(1.,i))-.9)/.1;z=F(z,0.,-(1-pow(1.-M/2.,20.)),0.);z.y=-abs(z.y);z=F(z,0.,-n/2.,0.);z.y=-y*s-z.y;float d=C(z,y*w,y*s);vec2 r=vec2(d,MATERIAL_ID_PYRAMID);f=F(f,0.,y*s+1.,0.);float O=F(f,vec3(1.),.5),u=.75+smoothstep(.7,1.,i)*7.5,t=t(F(f,0.,-.5,0.),vec2(.5+u,.5));vec2 k=vec2(mix(O,t,smoothstep(.65,.75,i)),MATERIAL_ID_CUBE);float R=h(A(v,7,10.,8.),2.),S=h(v,20.);vec2 g=vec2(max(R,-S),MATERIAL_ID_LIGHTBALL),o=vec2(v.y+2.,MATERIAL_ID_FLOOR),G=vec2(-h(v-x,50.),MATERIAL_ID_BOUNDING);return I(I(k,r),I(g,I(o,G)));}vec3 B(vec3 v,vec3 y,out int f,int x,float z){float r=0.;for(f=0;f<x;f++){float m=k(v)[0]*z;v+=y*m;m=abs(m);r+=m;if(m<.001*r)break;}return v;}vec3 D(vec3 v,vec3 y,out int z){return B(v,y,z,100,1.);}vec3 Z(vec3 v){vec2 y=vec2(.001,0.);return normalize(vec3(k(v+y.xyy)[0]-k(v-y.xyy)[0],k(v+y.yxy)[0]-k(v-y.yxy)[0],k(v+y.yyx)[0]-k(v-y.yyx)[0])+1e-09);}void main(){vec3 v=p();int y;vec3 f=D(x,v,y),z=vec3(0.);if(y<150){int m=int(k(f).y);vec3 w=Z(f);Material r=n[m];if(m==MATERIAL_ID_FLOOR){vec3 d=vec3(0.);float i=0.,s=16.,M=.003;vec3 G=G;G.xz=R(.5+l/200.*C(G.xz*.5))*G.xz;i=max(i,B(R(0.)*(G.xz-vec2(0.,0.)),s,M));i=max(i,B(R(.5)*(G.xz-vec2(10.,19.)),s,M));i=max(i,B(R(1.)*(G.xz-vec2(-10.,15.)),s,M));i=max(i,B(R(1.5)*(G.xz-vec2(7.,-19.)),s,M));i=max(i,B(R(2.)*(G.xz-vec2(-2.,-9.)),s,M));i=max(i,B(R(2.5)*(G.xz-vec2(-5.,4.)),s,M));i=max(i,B(R(3.)*(G.xz-vec2(-17.,-3.)),s,M));i=max(i,B(R(3.5)*(G.xz-vec2(14.,-13.)),s,M));i=max(i,B(R(4.)*(G.xz-vec2(22.,7.)),s,M));i=max(i,B(R(.5+l/100.*C(G.xz*.5))*(G.xz-vec2(-7.,4.)),s/2.,M));d=vec3(i);r.color=d;}z=A(f,w,-v,r,SphereLight(vec3(5.,9.,10.),vec3(1.),2.,100.));}t(z,4.1);})shader_source";
#endif
